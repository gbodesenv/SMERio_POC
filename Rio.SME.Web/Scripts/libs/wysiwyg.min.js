(function(n,t){var i={after:["attr","value"],defaults:{},extensions:{},init:function(u,f,e){if(!t.isWriteableObservable(f()))throw"valueAccessor must be writeable and observable";var o=e.has("wysiwygConfig")?e.get("wysiwygConfig"):null,s=e.has("wysiwygExtensions")?e.get("wysiwygExtensions"):[],h=r(i.defaults,s,o,arguments);return n(u).text(f()()),setTimeout(function(){n(u).tinymce(h)},0),t.utils.domNodeDisposal.addDisposeCallback(u,function(){n(u).tinymce().remove()}),{controlsDescendantBindings:!0}},update:function(t,i){var r=n(t).tinymce(),u=i()();r&&r.getContent()!==u&&(r.setContent(u),r.execCommand("keyup"))}},r=function(r,u,f,e){var o=n.extend(!0,{},r),s,h;return f&&(t.utils.objectForEach(f,function(n){Object.prototype.toString.call(f[n])==="[object Array]"&&(o[n]||(o[n]=[]),f[n]=t.utils.arrayGetDistinctValues(o[n].concat(f[n])))}),n.extend(!0,o,f)),o.plugins?n.inArray("paste",o.plugins)===-1&&o.plugins.push("paste"):o.plugins=["paste"],s=function(n){n.on("change keyup nodechange",function(t){e[1]()(n.getContent());for(var r in u)u.hasOwnProperty(r)&&i.extensions[u[r]](n,t,e[2],e[4])})},typeof o.setup=="function"?(h=o.setup,o.setup=function(n){h(n);s(n)}):o.setup=s,o};t.bindingHandlers.wysiwyg=i})(jQuery,ko);